<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.rzhd.wuye.mapper.EnterApplyMapper">

    <resultMap id="BaseResultMap" type="java.util.Map">
    <id column="ENTER_APPLY_ID" property="enterApplyId"/>
        <result column="HOUSE_INFO_ID" property="houseInfoId"/>
        <result column="CLIENT_NAME" property="clientName"/>
        <result column="APPLY_TIME" property="applyTime"/>
        <result column="AUDIT_STATUS" property="auditStatus"/>
        <result column="ENTER_ADVICE_NOTE" property="enterAdviceNote"/>
        <result column="NOTES" property="notes"/>
        <result column="CREATION_TIME" property="creationTime"/>
        <result column="UPDATE_TIME" property="updateTime"/>
        <association property="houseInfo" javaType="cn.rzhd.wuye.bean.HouseInfo">
            <id column="HOUSE_INFO_ID" property="houseInfoId"/>
            <result column="ERP_HOUSE_ID" property="erpHouseId"/>
            <result column="PROJECT_INFO_ID" property="projectInfoId"/>
            <result column="HOUSE_PROPERTY" property="houseProperty"/>
            <result column="ENTER_STATUS" property="enterStatus"/>
            <result column="STAR_LEVEL" property="starLevel"/>
            <result column="STATUS" property="status"/>
            <result column="CREATION_TIME" property="creationTime"/>
            <result column="UPDATE_TIME" property="updateTime"/>
            <association property="projectInfo" javaType="cn.rzhd.wuye.bean.ProjectInfo">
                <id column="PROJECT_INFO_ID" property="projectInfoId"/>
                <result column="ERP_PROJECT_ID" property="erpProjectId"/>
                <result column="PROJECT_NAME" property="projectName"/>
                <result column="PROJECT_ADDRESS" property="projectAddress"/>
                <result column="DEVELOPMENT_COLLECTING_COMPANY" property="developmentCollectingCompany"/>
                <result column="DEVELOPMENT_COLLECTING_ACCOUNT" property="developmentCollectingAccount"/>
                <result column="PROPERTY_COLLECTING_COMPANY" property="propertyCollectingCompany"/>
                <result column="PROPERTY_COLLECTING_ACCOUNT" property="propertyCollectingAccount"/>
                <result column="WATER_PRICE" property="waterPrice"/>
                <result column="ELECTRICITY_PRICE" property="electricityPrice"/>
                <result column="SERVICE_PHONE" property="servicePhone"/>
                <result column="OBJECT_PHONE" property="objectPhone"/>
                <result column="CREATION_TIME" property="creationTime"/>
                <result column="UPDATE_TIME" property="updateTime"/>
                <result column="STATUS" property="status"/>
            </association>
        </association>
    </resultMap>
    <!-- 单表查询info数据根据ID -->
    <select id="getEnterApplyByID" resultType="cn.rzhd.wuye.bean.EnterApply">
        SELECT
        ENTER_APPLY_ID,
        HOUSE_INFO_ID ,
        CLIENT_NAME ,
        APPLY_TIME ,
        AUDIT_STATUS ,
        ENTER_ADVICE_NOTE ,
        NOTES ,
        CREATION_TIME ,
        UPDATE_TIME
        FROM
        T_ENTER_APPLY
        <where>
            ENTER_APPLY_ID=#{enterApplyId}
        </where>
    </select>

    <!-- 入驻申请列表分页查询 -->
   <!-- <select id="findEnterApplyList" resultMap="BaseResultMap">
       SELECT * FROM (  SELECT U.*, ROWNUM RN
            FROM (SELECT apply.ENTER_APPLY_ID,project.PROJECT_NAME,house.HOUSE_PROPERTY,apply.CLIENT_NAME,apply.APPLY_TIME,apply.AUDIT_STATUS FROM
              T_ENTER_APPLY  apply,
              T_HOUSE_INFO house,
              T_PROJECT_INFO project
          WHERE
            apply.HOUSE_INFO_ID=house.HOUSE_INFO_ID
          AND
          house.PROJECT_INFO_ID=project.PROJECT_INFO_ID) U )
            WHERE RN BETWEEN #{pageStartRow} AND #{pageEndRow}
    </select> -->
    <!-- 入驻申请列表分页查询 -->
    <select id="findEnterApplyList" resultMap="BaseResultMap">
      SELECT apply.ENTER_APPLY_ID,project.PROJECT_NAME,house.HOUSE_PROPERTY,apply.CLIENT_NAME,apply.APPLY_TIME,apply.AUDIT_STATUS FROM
              T_ENTER_APPLY  apply,
              T_HOUSE_INFO house,
              T_PROJECT_INFO project
          WHERE
            apply.HOUSE_INFO_ID=house.HOUSE_INFO_ID
          AND
          house.PROJECT_INFO_ID=project.PROJECT_INFO_ID
    </select>
    <!-- 入驻申请列表条件查询 -->
    <select id="findEnterApplyByCondition" resultMap="BaseResultMap">

        SELECT * FROM (  SELECT U.*, ROWNUM RN
        FROM (SELECT * FROM T_ENTER_APPLY
        WHERE CLIENT_NAME LIKE CONCAT(CONCAT('%',#{condition}),'%')) U )
        WHERE RN BETWEEN #{pageStartRow} AND
        #{pageEndRow}
    </select>
    <!--  &lt;!&ndash; 入驻申请列表条件查询 &ndash;&gt;
      <select id="findEnterApplyByCondition" resultMap="BaseResultMap">

          SELECT * FROM (  SELECT U.*, ROWNUM RN
          FROM (SELECT * FROM T_ENTER_APPLY
          WHERE CLIENT_NAME LIKE CONCAT(CONCAT('%',#{condition}),'%')) U )
          WHERE RN BETWEEN #{pageStartRow} AND
          #{pageEndRow}
      </select>-->
    <!-- 用户信息修改 操作-->
    <!--<update id="updateEnterApply">
        update T_ENTER_APPLY set LOGO= #{user.logo},COMPANY_TYPE= #{user.companyType},
        CLIENT_NAME= #{user.clientName},PHONE= #{user.phone}
        where USER_ID = #{user.userId}
    </update>-->

    <!-- 用户信息删除操作 -->
   <!-- <delete id="delEnterApplyById">
        DELETE FROM T_USER WHERE USER_ID = #{userId}
    </delete>-->
</mapper>